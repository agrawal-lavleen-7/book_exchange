import{q as x,r as i,j as e,Y as h,a as d}from"./app-xQm2pq7_.js";import{A as p}from"./AuthenticatedLayout-pJJhUDv9.js";import"./transition-ChKOoiR9.js";function y({auth:s}){const{books:t}=x().props;i.useEffect(()=>{fetch("/api/books").then(r=>r.json()).then(r=>r).catch(r=>console.error("Error fetching books:",r))},[]);const[o,a]=i.useState(t.current_page),n=r=>{const c={sender_id:s.user.id,book_id:r,receiver_id:s.user.id,request_status:"pending",delivery_method:"Couroir",duration:"4 Days Max",address:"Vapi"};try{if(fetch("/api/exchange_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).ok)history.push("/exchange_requests");else throw new Error("Failed to create book")}catch(l){console.error("Error creating book:",l)}};return e.jsxs(p,{user:s.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Book List"}),children:[e.jsx(h,{title:"Books"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("a",{href:route("books.create"),children:e.jsx("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Add Book"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"px-4 py-2",children:"Title"}),e.jsx("th",{class:"px-4 py-2",children:"Genre"}),e.jsx("th",{class:"px-4 py-2",children:"Author"}),e.jsx("th",{class:"px-4 py-2",children:"Book Condition"}),e.jsx("th",{class:"px-4 py-2",children:"Availablity Status"}),e.jsx("th",{class:"px-4 py-2",children:"Owner"}),e.jsx("th",{class:"px-4 py-2",children:"Request For This Book"})]})}),e.jsx("tbody",{children:t.data&&t.data.length===0?e.jsx("tr",{children:e.jsx("td",{className:"border px-4 py-2",colSpan:"7",children:"No books found."})}):t.data&&t.data.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",scope:"row",children:e.jsx("a",{href:route("books.edit",{book:r.id}),children:r.title})}),e.jsx("td",{className:"border px-4 py-2",children:r.genre}),e.jsx("td",{className:"border px-4 py-2",children:r.author}),e.jsx("td",{className:"border px-4 py-2",children:r.book_condition}),e.jsx("td",{className:"border px-4 py-2",children:r.availablity_status}),e.jsx("td",{className:"border px-4 py-2",children:r.user?r.user.name:"-"}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{onClick:()=>n(r.id),children:"Request"})})]},r.id))})]}),e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"inline-flex -space-x-px text-sm",children:[t.prev_page_url&&e.jsx("li",{children:e.jsx(d,{href:t.prev_page_url,onClick:()=>a(o-1),className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Previous"})}),t.links.map(r=>e.jsx("li",{children:e.jsx(d,{href:r.url,onClick:()=>a(r.label),className:`flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r.active?"text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700":""}`,children:r.label})},r.url)),t.next_page_url&&e.jsx("li",{children:e.jsx(d,{href:t.next_page_url,onClick:()=>a(o+1),className:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Next"})})]})})]})]})})]})}export{y as default};
